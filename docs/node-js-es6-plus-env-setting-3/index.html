<!DOCTYPE html><html lang="ko"><head>
        <title>Node.js ES6+ 개발 환경 구축하기 Part 3. 로컬 서버</title>
        <meta name="title" content="Node.js ES6+ 개발 환경 구축하기 Part 3. 로컬 서버" />
        <meta name="description" content="세번째 과정. Node.js 서버를 세팅하면서 들었던 생각들, 도움된 레퍼런스 등 전반적인 과정을 주로 다룹니다." />
        <meta name="keywords" content="Node.js,ES6,setup,Local Server" />
        <meta property="og:url" content="https://yemsu.github.io/node-js-es6-plus-env-setting-3" />
        <meta property="og:type" content="article" />
        <meta property="og:title" content="Node.js ES6+ 개발 환경 구축하기 Part 3. 로컬 서버" />
        <meta property="og:description" content="세번째 과정. Node.js 서버를 세팅하면서 들었던 생각들, 도움된 레퍼런스 등 전반적인 과정을 주로 다룹니다." />
        <meta property="og:image" content="https://yemsu.github.io/images/og_image.jpg" />
        <meta property="twitter:card" content="https://yemsu.github.io/images/og_image.jpg" />
        <meta property="twitter:url" content="https://yemsu.github.io/node-js-es6-plus-env-setting-3" />
        <meta property="twitter:title" content="Node.js ES6+ 개발 환경 구축하기 Part 3. 로컬 서버" />
        <meta property="twitter:description" content="세번째 과정. Node.js 서버를 세팅하면서 들었던 생각들, 도움된 레퍼런스 등 전반적인 과정을 주로 다룹니다." />
        <meta property="twitter:image" content="https://yemsu.github.io/images/og_image.jpg" />
      <style>
    .utterances {
      position: relative;
      box-sizing: border-box;
      width: 100%;
      max-width: 760px;
      margin-left: auto;
      margin-right: auto;
    }
    .utterances-frame {
      color-scheme: light;
      position: absolute;
      left: 0;
      right: 0;
      width: 1px;
      min-width: 100%;
      max-width: 100%;
      height: 100%;
      border: 0;
    }
  </style><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2284%22>🌊</text></svg>"><title>ENJOY DEV</title><meta name="naver-site-verification" content="c702bde42c5742aa62750f39d810dd87c91f4811"><meta name="google-site-verification" content="rRA_cKc94OITZM0hBG9JQUQBl8IbTx9G7cY6mUo1hgw"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-922R4CGCRZ"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-922R4CGCRZ');</script><link href="/css/chunk-74d2d95d.css" rel="prefetch"><link href="/css/chunk-773fa2dd.css" rel="prefetch"><link href="/js/chunk-74d2d95d.js" rel="prefetch"><link href="/js/chunk-773fa2dd.js" rel="prefetch"><link href="/css/app.css" rel="preload" as="style"><link href="/js/app.js" rel="preload" as="script"><link href="/js/chunk-vendors.js" rel="preload" as="script"><link href="/css/app.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="/css/chunk-74d2d95d.css"><script charset="utf-8" src="/js/chunk-74d2d95d.js"></script></head><body><noscript><strong>We're sorry but ENJOY DEV doesn't work properly without JavaScript enabled. Please enable it to continue.</strong></noscript><div id="app" data-v-app=""><metainfo></metainfo><header data-v-49c83e62=""><h1 data-v-49c83e62=""><a href="/" class="logo size-medium" data-v-295f0452="" data-v-49c83e62=""><span class="logo-text dev" data-v-295f0452=""> D<span class="hidden" data-v-295f0452="">E</span>V </span><span class="logo-text enjoy" data-v-295f0452=""><span class="common-e" data-v-295f0452="">E</span>NJOY🌊 </span></a></h1><div class="links" data-v-49c83e62=""><a href="https://github.com/yemsu/" title="Yemsu Github" target="_blank" data-v-49c83e62=""><svg aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="26" data-view-component="true" class="octicon octicon-mark-github v-align-middle"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div></header><div class="container size-narrow" data-v-5006e508="" data-v-0cc18c81=""><nav class="outLiner" data-v-0cc18c81=""><h2 class="ir">글 목차 (클릭하여 바로가기)</h2><ul><li class=""><a href="#Intro">1. Intro</a></li><li class=""><a href="#Node.js-서버-설정">2. Node.js 서버 설정</a></li><li class=""><a href="#커맨드-지정">3. 커맨드 지정</a></li><li class=""><a href="#require-is-not-defined">4. require is not defined</a></li><li class="subTitle"><a href="#🔎-require-?">4-1. 🔎 require ?</a></li></ul></nav><!----><article data-v-0cc18c81="" style=""><div class="wrap-info" data-v-0cc18c81=""><h2 class="title" data-v-0cc18c81="">Node.js ES6+ 개발 환경 구축하기 Part 3. 로컬 서버</h2><p class="date" data-v-0cc18c81="">2022-02-27</p><ul class="keywords" data-v-0cc18c81=""><li class="keyword" data-v-0cc18c81="">Node.js</li><li class="keyword" data-v-0cc18c81="">ES6</li><li class="keyword" data-v-0cc18c81="">setup</li><li class="keyword" data-v-0cc18c81="">Local Server</li></ul></div><div class="article" data-v-0cc18c81=""><h3 id="Intro">Intro</h3>
<p>Express가 많이 나와있지만 우선 Node.js로만 구축해보기로했다.
Node.js로만 서버 구축하는건 아래처럼 불편한점이 많다고 한다.
직접 느껴보고 나중에 Express 프레임워크를 써보기로 한다.</p>
<blockquote>
  <p>이렇게 HTML을 전송해보았는데요. 코드가 너무 반복되고, 페이지 별로 HTML을 따로 만들어야하며, 이를 각각 주소와 일일히 연결해야하는 단점이 있습니다. 페이지가 수십 페이지 이상 늘어난다고 생각해보세요. 매번 GET 요청인지 확인하고, 주소를 파악하고, fs로 매칭되는 파일을 읽어서 브라우저로 전송해야 합니다. 이렇게 해서는 실제 서비스는 무리겠죠? 다음 시간에는 이 귀찮은 과정을 간단히 해결해 줄 Express 프레임워크에 대해서 알아봅시다!<br>
  …<br>
  Express 프레임워크는 코드의 양도 줄여주고 추후 유지보수가 쉽도록 만들어주기 때문에 사용합니다. 하지만 성능은 이전 시간의 생 코드보다는 떨어집니다. 하지만 크게 영향은 없기 때문에 사용해도 됩니다.</p>
  <p><cite><a href="https://www.zerocho.com/category/NodeJS/post/57774a8eacbd2e9803de0195">zerocho</a></cite></p>
</blockquote>
<h3 id="Node.js-서버-설정">Node.js 서버 설정</h3>
<p>💡 개발 서버 실행을 위해 세팅 했던 것으로, <a href="node-js-es6-plus-env-setting-4">다음 포스팅</a>에서 webpack-dev-server로 대체됨 💡
프로젝트 루트에 <code>app.js</code> 파일 생성</p>
<pre><code>$ touch app.js</code></pre>
<p><a href="https://nodejs.org/ko/docs/guides/getting-started-guide/">node.js 공식 문서</a> 와 <a href="https://www.zerocho.com/category/NodeJS/post/57774a8eacbd2e9803de0195">zerocho 블로그</a>를 참고해서 아래와 같이 작성했다.</p>
<h5 id="appjs">📃 app.js</h5>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>); <span class="hljs-comment">// 서버 만드는 모듈</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>); <span class="hljs-comment">// 주소 분석 모듈</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>); <span class="hljs-comment">// 파일을 읽고 쓰는 모듈</span>

<span class="hljs-keyword">const</span> hostname = <span class="hljs-string">'127.0.0.1'</span>;
<span class="hljs-keyword">const</span> port = <span class="hljs-number">3000</span>;
<span class="hljs-comment">/*
localhost주소를 입력하면 서버에 '정보'를 달라고 '요청'한다.
대기중이던 서버는 '요청'을 처리 후 클라리언트로 '정보'를 돌려준다.
&gt; 요청(request)와 정보(response)에는 header와 body가 있다.
    * header - request, response에 대한 정보(종류, 크기, 캐시) 등
    * body - 주고 받고자 하는 메인 정보
*/</span>
<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> { <span class="hljs-comment">// 서버 만드는 메소드</span>
  <span class="hljs-comment">// url모듈을 이용해서 url에 따라 다른 HTML을 전송하는 라우팅을 구현</span>
  <span class="hljs-keyword">const</span> path = url.parse(req.url, <span class="hljs-literal">true</span>).pathname; 
  <span class="hljs-keyword">if</span> (req.method === <span class="hljs-string">'GET'</span>) { <span class="hljs-comment">// GET 요청이면 </span>
    <span class="hljs-keyword">if</span> (path.includes(<span class="hljs-string">'.js'</span>)) {
      res.writeHead (<span class="hljs-number">200</span>, <span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/javascript'</span>);
      <span class="hljs-comment">// readFile 메소드로 HTML 파일을 읽어서 읽은 데이터를 브라우저로 보낸다.</span>
      fs.readFile(__dirname + path, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.error(err);
        }
        res.end(data);
      });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (path === <span class="hljs-string">'/'</span>) {
      res.writeHead (<span class="hljs-number">200</span>, <span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/html'</span>);
      <span class="hljs-comment">// __dirname - 현재 프로젝트의 경로</span>
      fs.readFile(__dirname + <span class="hljs-string">'/index.html'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.error(err);
        }
        res.end(data, <span class="hljs-string">'utf-8'</span>);
      });
    } <span class="hljs-keyword">else</span> {
      res.writeHead(<span class="hljs-number">404</span>, <span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain; charset=UTF-8'</span>);
      res.end(<span class="hljs-string">'주소가 없습니다'</span>, <span class="hljs-string">'utf-8'</span>);
    }
  }
}).listen(port);

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Server running at http://<span class="hljs-subst">${hostname}</span>:<span class="hljs-subst">${port}</span>/`</span>);</code></pre>
<h3 id="커맨드-지정">커맨드 지정</h3>
<p>커맨드 지정 후 서버를 실행해봤다.</p>
<h5 id="packagejson">📃 package.json</h5>
<pre><code class="language-json">{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"dev"</span>: <span class="hljs-string">"node app.js"</span>,                 <span class="hljs-comment">// NEW</span>
    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"babel lib -w -d dist/js"</span> 
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"jest"</span>
  },
}</code></pre>
<h3 id="require-is-not-defined">require is not defined</h3>
<p>엇 그런데 <code>Uncaught ReferenceError: require is not defined</code> 에러가 떴다.<br>
요고 아까 바벨로 트랜스파일링한 파일에서도 봤엇는데. require에 대해 알아봤다.</p>
<h4 id="🔎-require-?">🔎 <code>require</code> ?</h4>
<p>Node.js의 모듈시스템인 CommonJs에서 모듈을 불러오는 키워드라고 한다.<br>
CommonJs는 웹에서 쓰려면 Webpack같은 번들러를 사용해야 한다고한다.</p>
<p>그래서 설치하게된 Webpack은 다음 글에 계속!</p></div><div class="article-bottom" data-v-0cc18c81=""><p class="text-ps" data-v-0cc18c81=""><strong data-v-0cc18c81="">수정이 필요한 부분</strong> 혹은 <strong data-v-0cc18c81="">더 나은 방법</strong>을 알고계신가요? <br data-v-0cc18c81=""> 댓글로 알려주시면 저에게 큰 도움이 됩니다! 😊💜 </p><div class="vue-utterances" data-v-0cc18c81=""><div class="utterances" style="height: 269px;">
    <iframe class="utterances-frame" title="Comments" scrolling="no" src="https://utteranc.es/utterances.html?async=&amp;src=https%3A%2F%2Futteranc.es%2Fclient.js&amp;repo=yemsu%2Fyemsu.github.io&amp;issue-term=pathname&amp;theme=github-light&amp;crossorigin=anonymous&amp;url=http%3A%2F%2Flocalhost%3A8000%2Fnode-js-es6-plus-env-setting-3&amp;origin=http%3A%2F%2Flocalhost%3A8000&amp;pathname=node-js-es6-plus-env-setting-3&amp;title=ENJOY+DEV&amp;description=&amp;og%3Atitle=&amp;session=" loading="lazy"></iframe>
  </div></div></div></article></div><footer data-v-183da9a0=""> copyright © <a href="https://github.com/yemsu" target="_blank" title="Github (새창)" data-v-183da9a0="">yemsu</a>. All right reserved. </footer></div><script src="/js/chunk-vendors.js"></script><script src="/js/app.js"></script></body></html>